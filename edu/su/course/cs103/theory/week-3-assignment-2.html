<!-------------------------- © 2007 - present, dmj.one and contributors. ----------------------------------
   Part of the dmjone project. Licensed under the GNU AGPL. Provided as-is, without warranty of any kind. 
-------------------- Redistribution and modifications must retain this notice. --------------------------->


<!DOCTYPE html>
<!--[if lte 8]><html class="pre-ie9" lang="en"><![endif]-->
<!--[if gte IE 9]><!-->
<html lang="en">
    <!--<![endif]-->

    <head>
        <script src="/js/edu_su_common.js"></script>
        <noscript>
            <style>
                html,
                body {
                    margin: 0;
                    overflow: hidden;
                }
            </style>
            <iframe src="/frame_noscript.html" style="width:100%;height:100vh;border:none;display:block"></iframe>
        </noscript>

        <title>Week 3 - Assignment 2 - CS103 - Swayam</title>


        <meta property="og:image" content="/logo.png">
        <meta property="og:type" content="article">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@divyamohan1993">
        <meta name="twitter:creator" content="@divyamohan1993">
        <meta name="twitter:image" content="/logo.png">

        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />

        <meta name="author" content="Divya Mohan">
        <meta name="robots" content="index, follow">

        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.4/katex.min.js" integrity="sha512-sHSNLECRJSK+BFs7E8DiFc6pf6n90bLI85Emiw1jhreduZhK3VXgq9l4kAt9eTIHYAcuQBKHL01QKs4/3Xgl8g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.4/contrib/auto-render.min.js" integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                renderMathInElement(document.body, {
                    // customised options
                    // • auto-render specific keys, e.g.:
                    delimiters: [
                        { left: '$$', right: '$$', display: true },
                        { left: '$', right: '$', display: false },
                        { left: '\\(', right: '\\)', display: false },
                        { left: '\\[', right: '\\]', display: true }
                    ],
                    // • rendering keys, e.g.:
                    throwOnError: false
                });
            });
        </script> -->

        <style>

        </style>

    </head>

    <body>

        <script> header_author("dm"); </script>

        <main>
            <article class="agen-tableofcontents">
                <h2 class="text-center">
                    Week 3 - Assignment 2
                </h2>
            </article>

            <div class="alert text-center alert-warning m-0" role="alert">
                <div class="fw-bold h5">Notice</div>
                <span class="text-center">The following content is the property of Swayam used for explaining the solution. All rights reserved by Swayam and their publishers. Do not copy the solution directly.</span>
            </div>

            <article>
                <h3>1. Problem Description</h3>
                <p>You wake up to find your future self standing in front of you, having traveled back in time with a list of the daily stock market movement information of a particular stock/ETF. He provides you with this list and instructs you to use it to get rich. However, to avoid suspicion of insider trading, you can only place two orders: a buy order at 9:00 am and a sell order on or after the buying day at 3:30 pm. Your transactions must blend in with the crowd, ensuring minimal attention. This constraint means your net profit will also include any loss on intermediate days if the stock's performance fluctuates.</p>
                <p>Your objective is to find the best day to buy and the best day to sell, given the information provided.</p>
                <p>The task is to calculate the total profit (or loss, if negative) you would make if you buy <em>x</em> shares of the stock.</p>
            </article>

            <article>
                <h4>1.1 Input Format</h4>
                <p>The first line of input is <em>t</em>, the number of test cases. Each test case consists of two lines of input:</p>
                <ul>
                    <li><strong>First line</strong>: Two space-separated integers <em>n</em> and <em>x</em></li>
                    <li><strong>Second line</strong>: <em>n</em> space-separated integers, represented as <em>V<sub>i</sub></em>, which is the price increase (or decrease if negative) per share of that stock on the <em>i</em><sup>th</sup> day.</li>
                </ul>
                <p>Put simply, <em>V<sub>i</sub></em> is the value calculated as \( C_i - O_i \) where <em>C<sub>i</sub></em> is the closing price of the stock on the <em>i</em><sup>th</sup> day, and <em>O<sub>i</sub></em> is the opening price of the stock on the same day.</p>
            </article>

            <article>
                <h4>1.2 Constraints</h4>
                <ul>
                    <li><em>1 ≤ t ≤ 10<sup>4</sup></em></li>
                    <li><em>1 ≤ n ≤ 10<sup>3</sup></em></li>
                    <li><em>1 ≤ x ≤ 10<sup>8</sup></em></li>
                    <li><em>-10<sup>3</sup> ≤ V<sub>i</sub> ≤ 10<sup>3</sup></em> for all <em>i ∈ [1, n]</em></li>
                </ul>
            </article>

            <article>
                <h4>1.3 Output Format</h4>
                <p>For each test case, output a single integer representing the total profit or loss you will make if you buy and sell on the optimal days.</p>
            </article>

            <article>
                <h4>1.4 Sample Input</h4>
                <pre><code class="language-auto">2
9 10
-2 1 -3 4 -1 2 1 -5 4
5 5
5 4 -1 7 8
</code></pre>
            </article>

            <article>
                <h4>1.5 Sample Output</h4>
                <pre><code class="language-auto">60
115
</code></pre>
            </article>

            <article>
                <h4>1.6 Explanation</h4>
                <ul>
                    <li>For the first test case, the best time to buy and sell is when the price changes are 4, -1, 2, and 1, giving a total profit of 4 - 1 + 2 + 1 = 6. Since you buy 10 shares, the total profit is 60.</li>
                    <li>For the second test case, the best strategy is to buy and sell from the start till the end, yielding a total profit of 23. With 5 shares, the total profit is 115.</li>
                </ul>
            </article>


            <article>
                <h4>Solution</h4>
                <pre class="language-python"><code># Read the number of test cases (t) from user input
t = int(input())

# Loop through each test case
for _ in range(t):
    # Read two integers n and x from user input. n is the size of the array, x is a multiplier.
    n, x = map(int, input().split())
    
    # Read the array of integers from user input
    arr = list(map(int, input().split()))

    # Initialize variables for Kadane's algorithm to find the maximum subarray sum
    max_so_far = arr[0]  # Stores the maximum sum found so far
    max_ending_here = arr[0]  # Stores the maximum sum of the subarray ending at the current position
    start = 0  # Start index of the maximum subarray
    end = 0  # End index of the maximum subarray
    temp_start = 0  # Temporary start index for the current subarray

    # Iterate through the array starting from the second element
    for i in range(1, n):
        # Update the maximum sum of the subarray ending here. It can either include the current element in the previous subarray
        # or start a new subarray from the current element.
        max_ending_here = max(max_ending_here + arr[i], arr[i])
        
        # If the new subarray sum is greater than the maximum found so far, update max_so_far
        if max_ending_here > max_so_far:
            max_so_far = max_ending_here
            start = temp_start  # Update the start index of the maximum subarray
            end = i  # Update the end index of the maximum subarray
        
        # If the current subarray sum becomes negative, reset it and update the temporary start index
        if max_ending_here < 0:
            max_ending_here = 0
            temp_start = i + 1  # Update temp_start to the next index

    # Calculate the total sum of the array
    total_sum = sum(arr)
    
    # Calculate the maximum profit by taking the maximum of max_so_far (best subarray) and total_sum (entire array)
    max_profit = max(max_so_far, total_sum)

    # Print the maximum profit multiplied by x
    print(max_profit * x)</code></pre>
            </article>

            <article>
                <h4>Sample Solution Provided by Instructor</h4>
                <pre class="language-python"><code>def maxSubArray(nums):
    # Initialize 'maxSum' to the first element of the array 'nums'.
    # This will keep track of the maximum sum of any subarray found so far.
    maxSum = nums[0]
    
    # Initialize 'currentSum' to the first element of the array 'nums'.
    # This will track the current subarray sum as we iterate through 'nums'.
    currentSum = nums[0]

    # Iterate through the elements of 'nums', starting from the second element.
    for num in nums[1:]:
        # Update 'currentSum' to be either the current element 'num' (starting a new subarray)
        # or 'currentSum + num' (continuing the current subarray), whichever is larger.
        currentSum = max(num, currentSum + num)
        
        # Update 'maxSum' to be the maximum of itself or 'currentSum'.
        # This ensures that 'maxSum' always holds the highest sum found so far.
        maxSum = max(maxSum, currentSum)

    # Return the maximum subarray sum found.
    return maxSum

# Read the number of test cases.
t = int(input())

# Loop through each test case.
for _ in range(t):
    # Read two integers 'n' and 'x' from the input.
    # 'n' is the size of the array, and 'x' is a multiplier.
    n, x = map(int, input().split())
    
    # Read the list of integers 'nums', which represents the array of numbers.
    nums = list(map(int, input().split()))
    
    # Call 'maxSubArray' to find the maximum subarray sum and multiply it by 'x'.
    print(maxSubArray(nums) * x)
</code></pre>
            </article>


        </main>

        <script> copyright("all"); </script>

    </body>

</html>