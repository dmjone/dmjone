<!-------------------------- Â© 2007 - present, dmj.one and contributors. ----------------------------------
   Part of the dmjone project. Licensed under the GNU AGPL. Provided as-is, without warranty of any kind. 
-------------------- Redistribution and modifications must retain this notice. --------------------------->


<!DOCTYPE html>
<!--[if lte 8]><html class="pre-ie9" lang="en"><![endif]-->
<!--[if gte IE 9]><!-->
<html lang="en">
    <!--<![endif]-->

    <head>
        <script src="/js/edu_su_common.js"></script>
        <noscript>
            <style>
                html,
                body {
                    margin: 0;
                    overflow: hidden;
                }
            </style>
            <iframe src="/frame_noscript.html" style="width:100%;height:100vh;border:none;display:block"></iframe>
        </noscript>

        <title>Practical 9 - HAVING Clause - CSU357P - Shoolini U</title>
        <meta name="description" content="Learn how to use the HAVING clause in SQL to filter grouped rows based on aggregate conditions.">

        <meta property="og:image" content="/logo.png">
        <meta property="og:type" content="article">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@divyamohan1993">
        <meta name="twitter:creator" content="@divyamohan1993">
        <meta name="twitter:image" content="/logo.png">

        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />

        <meta name="author" content="Divya Mohan">
        <meta name="robots" content="index, follow">
    </head>

    <body>

        <script> header_author("dm"); </script>

        <main>

            <article class="agen-tableofcontents">
                <h2 class="text-center">
                    Practical 9: HAVING Clause
                </h2>
                <div class="d-none contentdate">2024, May 8</div>
            </article>

            <article id="having-clause">
                <h3>9. HAVING Clause</h3>
                <p>The HAVING clause allows you to specify conditions on the rows for each group - in other words, which rows should be selected based on the conditions you specify. The HAVING clause should follow the GROUP BY clause if you are going to use it.</p>

                <h4>9.1. Syntax</h4>
                <pre><code class="language-sql">
  SELECT column1, SUM(column2)
  FROM "list-of-tables"
  GROUP BY "column-list"
  HAVING "condition";
  </code></pre>
            </article>

            <article id="example-1">
                <h3>9.2. Example 1</h3>
                <p>Consider an employee table containing the employee's name, department, salary, and age. If you would like to select the average salary for each department, you could enter:</p>
                <pre><code class="language-sql">
  SELECT dept, AVG(salary)
  FROM employee
  GROUP BY dept;
  </code></pre>
                <p>To only calculate and display the average if the average salary is over 20000, you would use the HAVING clause:</p>
                <pre><code class="language-sql">
  SELECT dept, AVG(salary)
  FROM employee
  GROUP BY dept
  HAVING AVG(salary) > 20000;
  </code></pre>
            </article>

            <article id="exercise-1">
                <h3>9.3. Review Exercises</h3>
                <p>Use the following tables for the exercises:</p>
                <ul>
                    <li><strong>items_ordered</strong></li>
                    <li><strong>customers</strong></li>
                </ul>

                <h4>9.3.1. Exercise 1</h4>
                <p>How many people are in each unique state in the customers table that have more than one person in the state? Select the state and display the number of people in each if it's greater than 1.</p>
                <pre><code class="language-sql">
  SELECT state, COUNT(state)
  FROM customers
  GROUP BY state
  HAVING COUNT(state) > 1;
  </code></pre>
            </article>

            <article id="exercise-2">
                <h4>9.3.2. Exercise 2</h4>
                <p>From the items_ordered table, select the item, maximum price, and minimum price for each specific item in the table. Only display the results if the maximum price for one of the items is greater than 190.00.</p>
                <pre><code class="language-sql">
  SELECT item, MAX(price), MIN(price)
  FROM items_ordered
  GROUP BY item
  HAVING MAX(price) > 190.00;
  </code></pre>
            </article>

            <article id="exercise-3">
                <h4>9.3.3. Exercise 3</h4>
                <p>How many orders did each customer make? Use the items_ordered table. Select the customerid, number of orders they made, and the sum of their orders if they purchased more than 1 item.</p>
                <pre><code class="language-sql">
  SELECT customerid, COUNT(customerid), SUM(price)
  FROM items_ordered
  GROUP BY customerid
  HAVING COUNT(customerid) > 1;
  </code></pre>
            </article>

        </main>

        <script> copyright("all"); </script>
    </body>

</html>
