<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <title>Article</title>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    </head>

    <body>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container">
                <a class="navbar-brand" href="/">Blog</a>
            </div>
        </nav>
        <div class="container mt-4">
            <div id="article"></div>
            <div id="comments" class="mt-4"></div>
            <div id="commentForm" class="mt-4">
                <h3>Leave a Comment</h3>
                <textarea id="commentContent" class="form-control"></textarea>
                <button id="submitComment" class="btn btn-primary mt-2">Submit</button>
            </div>
        </div>
        <script>
            const urlParams = new URLSearchParams(window.location.search)
            const id = urlParams.get('id')
            fetch('api/articles').then(r => r.json()).then(data => {
                let article = data.find(a => a.id == id)
                if (article) {
                    document.getElementById('article').innerHTML = '<h1>' + article.title + '</h1><p>' + article.content + '</p>'
                }
            })
            document.getElementById('submitComment').addEventListener('click', () => {
                fetch('api/articles/' + id + 'comment', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ content: document.getElementById('commentContent').value }) }).then(r => r.json()).then(data => {
                    location.reload()
                })
            })
        </script>
    </body>

</html>