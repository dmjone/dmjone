<!DOCTYPE html>

<!-- ===================================================================
  CONFIDENTIAL - PROPRIETARY SOFTWARE
  Title: SURAT – Shoolini University Resume Analyzer and Tuner
  Author: Divya Mohan
  Created: May 26, 2025
  Version: 1.0.0
  © 2025 Divya Mohan. All rights reserved.
  
  NOTICE:
    Unauthorized copying, modification, distribution, or reverse engineering
    of this software or any portion thereof without prior written permission
    from Divya Mohan is strictly prohibited. Violators will be subject to
    civil and criminal penalties under applicable intellectual property
    laws, including but not limited to the Copyright Act of India.
    
    This document contains confidential and proprietary information. You
    acknowledge that any breach may cause irreparable harm for which
    monetary damages may be inadequate. Divya Mohan reserves the right
    to seek injunctive relief and other legal remedies.
  =================================================================== -->

<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>SURAT – Shoolini University Resume Analyzer and Tuner</title>
        <meta name="description" content="A Shoolini University Resume Analyzer and Tuner. Made by dmj.one">

        <link rel="shortcut icon" href="https://dmj.one/logo.png">

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

        <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&display=swap" rel="stylesheet" />

        <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lora&display=swap" rel="stylesheet">

        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

        <style>
            html,
            body {
                height: 100%;
                margin: 0;
                padding: 0;
                overflow-x: hidden;
            }

            .taste {
                background: linear-gradient(to right, #d4af37 0%, #fff 50%, #d4af37 100%);
                background-size: 200% auto;
                color: transparent;
                background-clip: text;
                -webkit-background-clip: text;
                animation: shimmer 3s ease-in-out infinite;
            }

            .font-merriweather {
                font-family: 'Merriweather', serif;
            }

            @keyframes shimmer {
                0% {
                    background-position: 200% center;
                }

                100% {
                    background-position: -200% center;
                }
            }

            body {
                font-family: 'Lora', serif;
            }

            body {
                /* font-family: 'Poppins', sans-serif; */
            }

            .template-option.active .template-preview {
                border-color: #3B82F6;
                /* border-color: #CE1126; */
                box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
            }

            .progress-bar {
                transition: width 1s ease-in-out;
            }

            .animate-pulse {
                animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            }

            @keyframes pulse {

                0%,
                100% {
                    opacity: 1;
                }

                50% {
                    opacity: 0.5;
                }
            }

            .full-height {
                min-height: 100vh;
            }

            .text-area-tall {
                min-height: 30vh;
            }

            .max-height-box {
                max-height: 30vh;
                overflow-y: auto;
            }

            .main-container {
                max-width: 1400px;
            }

            .card {
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
                transition: all 0.3s ease;
            }

            .card:hover {
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            }

            .card {
                border-radius: .75rem;
            }

            h2 {
                letter-spacing: 0.5px;
            }

            .btn {
                font-weight: 600;
            }

            /* Glassmorphism + ensure contrast */
            .helpboxguidance {
                background-color: rgb(255 253 234 / 70%) !important;
                backdrop-filter: blur(4px);
            }

            nav:hover {
                box-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
                transition: box-shadow 0.3s ease-in-out;
            }

            .toast-success {
                position: fixed;
                bottom: 80px;
                right: 30px;
                background-color: #10b981;
                /* emerald-500 */
                color: white;
                padding: 12px 24px;
                border-radius: 0.75rem;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
                font-weight: 500;
                z-index: 1000;
                animation: fadeInOut 4s ease-in-out forwards;
            }

            .toast-danger {
                position: fixed;
                bottom: 80px;
                right: 30px;
                background-color: #b91010;
                /* emerald-500 */
                color: white;
                padding: 12px 24px;
                border-radius: 0.75rem;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
                font-weight: 500;
                z-index: 1000;
                animation: fadeInOut 4s ease-in-out forwards;
            }

            @keyframes fadeInOut {
                0% {
                    opacity: 0;
                    transform: translateY(-20px);
                }

                10%,
                90% {
                    opacity: 1;
                    transform: translateY(0);
                }

                100% {
                    opacity: 0;
                    transform: translateY(-20px);
                }
            }

            .disabled {
                opacity: 0.8;
                pointer-events: none;
                cursor: not-allowed;
            }

            /* Fallback styles for getEmotionMeta classes */
            .text-red-600 {
                color: #dc2626;
            }

            .bg-red-600 {
                background-color: #dc2626;
            }

            .text-orange-600 {
                color: #ea580c;
            }

            .bg-orange-600 {
                background-color: #ea580c;
            }

            .text-amber-600 {
                color: #d97706;
            }

            .bg-amber-600 {
                background-color: #d97706;
            }

            .text-yellow-600 {
                color: #ca8a04;
            }

            .bg-yellow-600 {
                background-color: #ca8a04;
            }

            .text-lime-600 {
                color: #65a30d;
            }

            .bg-lime-600 {
                background-color: #65a30d;
            }

            .text-green-600 {
                color: #16a34a;
            }

            .bg-green-600 {
                background-color: #16a34a;
            }

            .text-emerald-600 {
                color: #059669;
            }

            .bg-emerald-600 {
                background-color: #059669;
            }

            .text-success-600 {
                color: #0d9488;
            }

            .text-purple-600 {
                color: rgb(129, 12, 129);
            }

            .bg-teal-600 {
                background-color: #0d9488;
            }

            .text-sky-600 {
                color: #0284c7;
            }

            .bg-sky-600 {
                background-color: #0284c7;
            }

            .text-blue-600 {
                color: #2563eb;
            }

            .bg-blue-600 {
                background-color: #2563eb;
            }

            .gauge-card {
                background: white;
                border-radius: 1rem;
                padding: 1rem;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);
                transition: box-shadow 0.3s ease-in-out;
            }

            .gauge-card:hover {
                box-shadow: 0 0 15px rgba(234, 179, 8, 0.4);
            }

            #matchPercentageBar {
                box-shadow: 0 0 8px rgba(234, 179, 8, 0.5);
            }

            #detailedAnalysisContainer table tr:hover {
                background-color: #fffbe6;
                transition: background-color 0.3s ease;
            }

            footer:hover {
                box-shadow: 0 -4px 30px rgba(234, 179, 8, 0.3);
                transition: box-shadow 0.3s ease-in-out;
            }

            .hover\:shadow-lg:hover {
                box-shadow: 0 4px 24px rgba(234, 179, 8, 0.2);
            }

            #buildResumeBtn:hover {
                box-shadow: 0 0 12px rgba(147, 51, 234, 0.4);
            }
        </style>


    </head>

    <body class="bg-gradient-to-br from-red-200 to-gray-200 min-h-screen">

        <section id="hero" class="h-screen relative flex items-center justify-center bg-black text-white overflow-hidden">

            <!-- Animated Gold Particles -->
            <div id="luxury-bg" class="absolute inset-0 z-0"></div>

            <!-- Dark Overlay -->
            <div class="absolute inset-0 bg-black opacity-30 z-10"></div>

            <!-- Foreground Content -->
            <div class="relative z-20 px-4 text-center">
                <img class="img-fluid my-5 mx-auto max-h-20" src="https://shooliniuniversity.com/assets/images/logo.png" />
                <h1 class="text-6xl md:text-8xl font-bold taste" style="font-family: 'Playfair Display', serif;">SURAT</h1>
                <p class="mt-4 text-xl md:text-2xl text-yellow-100" style="font-family: 'Lora', serif;">
                    Shoolini University Resume Analyzer &amp; Tuner
                </p>
                <a href="#navigationstarter" class="mt-8 inline-block px-6 py-3 bg-white text-yellow-800 font-semibold rounded-lg shadow-lg hover:bg-yellow-100 transition">
                    Get Started
                </a>
            </div>

        </section>



        <nav id="navigationstarter" class="bg-gradient-to-l from-black via-gray-900 to-yellow-900 shadow-lg w-full border-b border-yellow-600">
            <div class="container mx-auto px-6 py-4 flex justify-center md:justify-between items-center">

                <!-- Logo + Title (always visible) -->
                <div class="flex items-center space-x-3">
                    <i class="fas fa-file-alt text-yellow-400 text-2xl"></i>
                    <h1 class="text-2xl font-bold text-yellow-300" style="font-family: 'Playfair Display', serif;">
                        SURAT
                    </h1>
                </div>

                <!-- Tagline (hidden on small, shown on md+) -->
                <div class="hidden md:flex space-x-4">
                    <p class="text-yellow-100 italic tracking-wide" style="font-family: 'Lora', serif;">
                        A Shoolini University Resume Analysis &amp; Tuning Service
                    </p>
                </div>

            </div>
        </nav>

        <!-- How to Use SURAT -->
        <section id="how-to-use" class="helpboxguidance relative py-20 pb-30 mb-10 px-6 md:px-20 rounded shadow-2xl border-l-[6px] border-yellow-500 overflow-hidden">

            <!-- Heading -->
            <h2 class="text-4xl font-semibold text-center mb-16 text-yellow-600 tracking-wide" style="font-family: 'Playfair Display', serif;">
                <i class="fas fa-play-circle mr-2 text-yellow-500 text-3xl align-middle"></i> How to Use SURAT
                <div class="w-20 h-1 bg-yellow-400 mx-auto mt-3 rounded"></div>
            </h2>

            <!-- Stepper Timeline -->
            <div class="relative max-w-4xl mx-auto space-y-20 font-[Lora]">

                <!-- Step 1 -->
                <div class="flex flex-col md:flex-row items-start md:items-center gap-8">
                    <div class="flex-shrink-0 text-yellow-500 text-5xl font-bold">1</div>
                    <div class="text-gray-700 text-lg leading-relaxed max-w-xl">
                        <strong class="text-yellow-700 font-semibold">Paste</strong> the complete job description into the
                        JD box.
                        <div class="text-sm mt-1 text-gray-500">The resume section will unlock automatically once parsed.
                        </div>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="flex flex-col md:flex-row items-start md:items-center gap-8">
                    <div class="flex-shrink-0 text-yellow-500 text-5xl font-bold">2</div>
                    <div class="text-gray-700 text-lg leading-relaxed max-w-xl">
                        <strong class="text-yellow-700 font-semibold">Do you have a resume?</strong>
                        <ul class="list-disc pl-6 mt-2 text-gray-600">
                            <li><strong>Yes:</strong> Upload your file or paste text — SURAT processes it automatically.
                            </li>
                            <li><strong>No:</strong> Click “No” to open our quick builder and answer the prompts.</li>
                        </ul>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="flex flex-col md:flex-row items-start md:items-center gap-8">
                    <div class="flex-shrink-0 text-yellow-500 text-5xl font-bold">3</div>
                    <div class="text-gray-700 text-lg leading-relaxed max-w-xl">
                        <strong class="text-yellow-700 font-semibold">Scroll down</strong> to see your full analysis with
                        visual insights, skill matching, and personalized recommendations.
                    </div>
                </div>

            </div>

            <!-- Decorative Luxury Glow -->
            <div class="absolute top-10 right-5 w-40 h-40 bg-yellow-100 rounded-full blur-3xl opacity-30 pointer-events-none">
            </div>
            <div class="absolute bottom-10 left-5 w-40 h-40 bg-yellow-200 rounded-full blur-2xl opacity-20 pointer-events-none">
            </div>

        </section>


        <div class="container mx-auto px-4 py-8 main-container" id="allstartshere">

            <div class="grid lg:grid-cols-2 gap-8 mb-16 font-[Lora]" id="splitscreenjdresumecapturinglocation">
                <div class="bg-gradient-to-br from-gray-50 to-white rounded-2xl p-6 shadow-xl border-l-4 border-yellow-500 flex flex-col justify-between">
                    <div>
                        <h2 class="text-2xl font-semibold mb-4 flex items-center text-gray-800" style="font-family: 'Playfair Display', serif;">
                            <i class="fas fa-briefcase mr-3 text-yellow-600"></i> Job Description
                        </h2>
                        <p class="text-gray-600 mb-4 text-sm">
                            Paste the job description to identify key skills and requirements.
                        </p>
                        <textarea id="jobDescription" class="w-full h-60 p-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-yellow-600 transition duration-300 text-gray-700 resize-none" placeholder="Paste job description here..."></textarea>
                    </div>

                    <div id="skillsTable" class="mt-6 hidden">
                        <h3 class="text-lg font-semibold mb-2 text-gray-800">Key Skills</h3>
                        <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm max-h-40 overflow-y-auto">
                            <div id="categorySkills" class="mb-4"></div>
                            <h4 class="font-medium mb-2 text-gray-700">All Skills</h4>
                            <ul id="skillsList" class="list-disc pl-5 space-y-1 text-gray-600 text-sm"></ul>
                        </div>
                    </div>

                    <div id="loadingSkills" class="mt-4 text-center hidden">
                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-yellow-600">
                        </div>
                        <p class="mt-2 text-yellow-600">Processing JD... please wait.</p>
                    </div>

                    <div id="jdSuccessMessage" class="mt-4 text-green-600 text-center font-medium hidden">
                        Job description processed. Please upload or paste your resume.
                    </div>
                </div>

                <div id="resumeSection" class="disabled bg-gradient-to-br from-gray-50 to-white rounded-2xl p-6 shadow-xl border-l-4 border-yellow-500 flex flex-col justify-between">
                    <div id="lockedmessagependingjd" class="my-4 p-4 text-red-600 text-center text-2xl ">
                        Please paste Job Description first to unlock this section.
                    </div>

                    <!-- ==== Resume Prompt ==== -->
                    <div id="resumePrompt" class="hidden text-center space-y-4">
                        <p class="text-gray-800 text-lg">Do you have an existing resume?</p>
                        <div class="flex justify-center space-x-4">
                            <button id="hasResumeYes" class="px-4 py-2 bg-green-500 text-white rounded-lg">Yes</button>
                            <button id="hasResumeNo" class="px-4 py-2 bg-red-500   text-white rounded-lg">No</button>
                        </div>
                    </div>

                    <div id="lockedmessagependingjdinlocker" class="hidden">
                        <h2 class="text-2xl font-semibold mb-4 flex items-center text-gray-800" style="font-family: 'Playfair Display', serif;">
                            <i class="fas fa-file-alt mr-3 text-yellow-600"></i> Your Resume
                        </h2>
                        <p class="text-gray-600 mb-4 text-sm">Choose one method to submit your resume:</p>

                        <!-- Toggle Buttons -->
                        <div class="flex space-x-4 mb-4">
                            <button id="chooseUpload" class="flex-1 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition">Upload
                                File</button>
                            <button id="chooseText" class="flex-1 py-2 bg-yellow-100 text-yellow-800 rounded-lg hover:bg-yellow-200 transition">Paste
                                Text</button>
                        </div>



                        <!-- Upload Box -->
                        <div id="uploadBox" class="hidden mb-4">
                            <label class="flex flex-col border-2 border-dashed border-yellow-300 hover:bg-yellow-50 hover:border-yellow-500 p-6 text-center rounded-xl transition duration-300 cursor-pointer h-40 justify-center">
                                <div class="flex flex-col items-center justify-center">
                                    <i class="fas fa-cloud-upload-alt text-4xl text-yellow-400 group-hover:text-yellow-600 transition duration-300"></i>
                                    <p class="text-sm text-yellow-500 group-hover:text-yellow-600 mt-2 transition duration-300">
                                        Upload PDF or DOCX</p>
                                </div>
                                <input type="file" class="hidden" id="resumeUpload" accept=".pdf,.docx" />
                            </label>
                        </div>

                        <!-- Paste Text Box -->
                        <div id="textBox" class="hidden mb-4">
                            <textarea id="resumeText" class="w-full h-40 p-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-yellow-600 transition duration-300 text-gray-700 resize-none" placeholder="Paste resume text here..."></textarea>
                        </div>
                    </div>

                    <!-- Hidden Key Skills Storage -->
                    <textarea id="hiddenSkills" class="hidden"></textarea>

                    <!-- Success Message -->
                    <div id="resumeSuccessMessage" class="mt-4 text-green-600 text-center font-medium hidden">
                        Resume received. Processing now…
                    </div>

                    <div id="loadingResume" class="mt-4 text-center hidden">
                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-yellow-600">
                        </div>
                        <p class="mt-2 text-yellow-600">Processing resume... please wait.</p>
                    </div>
                </div>

            </div>


            <!-- Analysis Section - Middle Row -->
            <div class="mx-auto sm:px-4 lg:px-6 xl:px-8 bg-white rounded-xl card mb-8 p-6 hidden" id="mainanalysiscommoncontainer">
                <h2 class="text-xl font-semibold mb-4 flex items-center text-gray-800 hidden">
                    <i class="fas fa-chart-bar mr-2 text-green-600"></i>Resume Analysis
                </h2>
                <p class="text-gray-600 mb-4 text-sm hidden">
                    Analyze how well your resume matches the job requirements and get insights.
                </p>
                <button id="analyzeResumeBtn" class="hidden w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition duration-300 flex items-center justify-center font-medium mb-6">
                    <i class="fas fa-chart-bar mr-2"></i>Analyze Matching
                </button>

                <!-- MODIFIED ANALYSIS LAYOUT - Center-aligned pyramid structure -->
                <div class="flex flex-col items-center">
                    <!-- Hero Feedback -->
                    <div id="feedbackHero" class="mb-12 text-center font-[Lora] hidden">
                        <h2 id="heroEmotion" class="text-4xl md:text-4xl font-bold text-yellow-600 my-10" style="font-family:'Playfair Display', serif;"></h2>
                        <p id="heroHeadline" class="text-justify text-xl md:text-xl text-gray-800 my-10"></p>
                    </div>


                    <!-- <div id="bothchartsinside" class="hidden grid lg:grid-cols-3 gap-8 mb-16 font-[Lora]">
                    
                    <div
                        class="bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 shadow-xl border-l-4 border-yellow-400 flex flex-col items-center justify-center space-y-6">
                        <div class="relative w-full">
                            <canvas id="atsScoreChart"></canvas>
                            <div id="atsScoreText"
                                class="absolute inset-0 flex items-center justify-center text-lg font-semibold text-yellow-600">
                            </div>
                        </div>
                        <p class="text-center text-gray-700 text-sm">
                            <span class="font-semibold text-yellow-700">Tailored ATS Compatibility</span><br>
                            An estimate of how well your resume passes automated filters (based on keyword coverage, synonym & skills-taxonomy matching, job-title alignment, years-of-experience fit, education & certification relevance, formatting & section structure compatibility, location proximity, and overall semantic relevance).
                        </p>
                    </div>
                    
                    <div
                        class="bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 shadow-xl border-l-4 border-yellow-400 flex flex-col items-center justify-center space-y-6">
                        <div id="skillChartContainer" class="relative w-full">
                            <canvas id="skillChart"></canvas>
                        </div>
                        <p class="text-center text-gray-700 text-sm">
                            <span class="font-semibold text-yellow-700">Skill Match</span><br>
                            Visualizes how many of the JD’s key skills you already have versus those you’re missing.
                        </p>
                    </div>
                    
                    <div
                        class="bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 shadow-xl border-l-4 border-yellow-400 flex flex-col items-center justify-center space-y-6">
                        <div class="relative w-full">
                            <canvas id="overallMatchChart"></canvas>
                            <div id="overallMatchText"
                                class="absolute inset-0 flex items-center justify-center text-lg font-semibold text-yellow-600">
                            </div>
                        </div>
                        <p class="text-center text-gray-700 text-sm">
                            <span class="font-semibold text-yellow-700">Overall Match</span><br>
                            Combines both skill overlap and ATS factors into one single “how well you match” score.
                        </p>
                    </div>

                </div> -->

                    <div id="bothchartsinside" class="hidden grid grid-cols-1 md:grid-cols-2 justify-items-center gap-8 mb-16 font-[Lora]">


                        <div class="bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 shadow-xl border-l-4 border-yellow-400 flex flex-col items-center justify-center space-y-6">
                            <div class="relative w-full max-w-xs">
                                <canvas id="atsScoreChart"></canvas>
                                <div id="atsScoreText" class="absolute inset-0 flex items-center justify-center text-lg font-semibold text-yellow-600">
                                </div>
                            </div>
                            <p class="text-center text-gray-700 text-sm">
                                <span class="font-semibold text-yellow-700">Tailored ATS Compatibility</span><br>
                                An estimate of how well your resume passes automated filters (based on keyword coverage, synonym & skills-taxonomy matching, job-title alignment, years-of-experience fit, education & certification relevance, formatting & section structure compatibility, location proximity, and overall semantic relevance).
                            </p>
                        </div>


                        <div class="bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 shadow-xl border-l-4 border-yellow-400 flex flex-col items-center justify-center space-y-6">
                            <div id="skillChartContainer" class="relative w-full max-w-xs">
                                <canvas id="skillChart"></canvas>
                            </div>
                            <p class="text-center text-gray-700 text-sm">
                                <span class="font-semibold text-yellow-700">Skill Match</span><br>
                                Visualizes how many of the JD’s key skills you already have versus those you’re missing.
                            </p>
                        </div>

                    </div>





                    <!-- Matched and Unmatched Skills -->
                    <div id="matchedSkillsContainer" class="hidden w-full mb-12 font-[Lora]">
                        <h2 class="text-2xl font-semibold mb-6 flex items-center text-gray-800" style="font-family: 'Playfair Display', serif;">
                            <i class="fas fa-cogs mr-3 text-yellow-500"></i> Skill Matching
                        </h2>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Matched Skills -->
                            <div class="bg-white p-6 rounded-xl border border-yellow-300 shadow-sm">
                                <h3 class="text-lg font-semibold text-green-700 mb-3" style="font-family: 'Playfair Display', serif;">Matched Skills</h3>
                                <ul id="matchedSkillsList" class="list-disc pl-5 space-y-1 text-green-600 text-sm leading-relaxed"></ul>
                            </div>

                            <!-- Missing Skills -->
                            <div class="bg-white p-6 rounded-xl border border-yellow-300 shadow-sm">
                                <h3 class="text-lg font-semibold text-red-700 mb-3" style="font-family: 'Playfair Display', serif;">Missing Skills</h3>
                                <ul id="unmatchedSkillsList" class="list-disc pl-5 space-y-1 text-red-600 text-sm leading-relaxed"></ul>
                            </div>
                        </div>
                    </div>


                    <div id="metricsDashboardContainer" class="hidden bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 card mb-12 space-y-10 border-l-4 border-yellow-400 shadow-xl pt-6 max-w-screen-xl mx-auto">

                        <!-- Header -->
                        <h2 class="text-2xl font-semibold flex items-center text-gray-800" style="font-family: 'Playfair Display', serif;">
                            <i class="fas fa-user-tie mr-3 text-yellow-500"></i> Human Analysis
                        </h2>

                        <!-- Info Message -->
                        <div class="text-sm text-gray-700 flex items-start bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg shadow-sm">
                            <i class="fas fa-info-circle mt-0.5 mr-2 text-yellow-500"></i>
                            <span style="font-family: 'Lora', serif;">
                                These gauges represent the core criteria a hiring manager evaluates—clarity, conciseness,
                                and evidence of impact—once your resume has passed the ATS stage.
                            </span>
                        </div>

                        <!-- Gauges Grid -->
                        <div id="metricsGauges" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 xl:grid-cols-8 gap-4">
                            <!-- Gauges are dynamically injected here -->
                        </div>

                        <div class="text-sm text-gray-700 flex items-start bg-blue-50 border-l-4 border-yellow-400 p-4 rounded-lg shadow-sm">
                            <i class="fas fa-hexagon-nodes mt-0.5 mr-2 text-yellow-500"></i>Confidence Score (AI’s certainty
                            in its analysis): <span id="analysisconfidencescore" class="text-red-600 font-semibold"></span>%
                        </div>
                    </div>




                    <!-- Detailed Analysis in Tabular Format -->
                    <div id="detailedAnalysisContainer" class="w-full hidden mx-auto font-[Lora]">
                        <h3 class="text-2xl font-semibold mb-6 text-gray-800" style="font-family: 'Playfair Display', serif;">
                            <i class="fas fa-chart-line mr-3 text-yellow-500"></i> Detailed Resume Analysis
                        </h3>

                        <div class="overflow-hidden rounded-xl border-l-4 border-yellow-500 shadow-xl bg-white">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-yellow-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-4 text-left text-xs font-semibold text-yellow-800 uppercase tracking-wider" style="font-family: 'Playfair Display', serif;">
                                            Category
                                        </th>
                                        <th scope="col" class="px-6 py-4 text-left text-xs font-semibold text-yellow-800 uppercase tracking-wider" style="font-family: 'Playfair Display', serif;">
                                            Details
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="text-justify bg-white divide-y divide-gray-100 text-sm text-gray-700">

                                    <tr>
                                        <td class="px-6 py-4 font-medium text-indigo-600">Overall Assessment</td>
                                        <td class="px-6 py-4" id="overallAssessment"></td>
                                    </tr>

                                    <tr class="bg-gray-50">
                                        <td class="px-6 py-4 font-medium text-indigo-600">Priority Skills to Add</td>
                                        <td class="px-6 py-4">
                                            <ul id="prioritySkillsList" class="list-disc pl-5 space-y-1"></ul>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="px-6 py-4 font-medium text-indigo-600">Quick Fixes</td>
                                        <td class="px-6 py-4">
                                            <ul id="quickFixes" class="list-disc pl-5 space-y-1"></ul>
                                        </td>
                                    </tr>

                                    <tr class="bg-gray-50">
                                        <td class="px-6 py-4 font-medium text-indigo-600">Recommendations</td>
                                        <td class="px-6 py-4">
                                            <ul id="recommendationsList" class="list-disc pl-5 space-y-1"></ul>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="px-6 py-4 font-medium text-indigo-600">Sections to Improve</td>
                                        <td class="px-6 py-4">
                                            <ul id="sectionsToImproveList" class="list-disc pl-5 space-y-1"></ul>
                                        </td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                    </div>


                    <!-- Requirement Gap Analysis -->
                    <div id="requirementAnalysisContainer" class="hidden mt-6">
                        <h3 class="text-lg font-medium mb-3 text-gray-800 text-center">
                            Requirement Gap Analysis
                        </h3>
                        <div id="requirementList" class="space-y-4"></div>
                    </div>




                </div>

                <!-- Category Analysis Section -->
                <div id="categoryAnalysisContainer" class="mt-12 hidden font-[Lora]">
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800" style="font-family: 'Playfair Display', serif;">
                        <i class="fas fa-layer-group mr-3 text-yellow-500"></i> Skills by Category
                    </h3>

                    <div id="categoryCharts" class="grid grid-cols-1 md:grid-cols-3 gap-6 px-4">
                        <!-- Each chart card is dynamically injected here -->
                    </div>
                </div>

                <!-- Loading Spinner -->
                <div id="loadingAnalysis" class="my-5 text-center hidden">
                    <div class="inline-block animate-spin rounded-full h-10 w-10 border-t-4 border-b-4 border-yellow-500">
                    </div>
                    <p class="mt-3 text-yellow-600 font-medium">Analyzing your resume… this may take up to 2 minutes.</p>
                </div>

            </div>

            <!-- Generate Section - Bottom Row -->
            <div class="bg-white rounded-xl p-6 card disabled hidden">
                <h2 class="text-xl font-semibold mb-4 flex items-center text-gray-800">
                    <i class="fas fa-file-alt mr-2 text-purple-600"></i>Generate Fixed Resume - <span class="text-red-600 font-bold">Section Under Construction</span>
                </h2>
                <p class="text-gray-600 mb-4 text-sm">
                    Generate a professionally tailored resume optimized for this specific job.
                </p>

                <!-- Template Selector -->
                <div class="mb-5">
                    <h3 class="text-md font-medium mb-3 text-gray-700">Choose a Template</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <div class="template-option cursor-pointer active" data-template="professional">
                            <div class="template-preview bg-gray-50 p-3 rounded-lg border-2 border-blue-500 transition duration-300 h-24 flex flex-col">
                                <div class="w-full h-4 bg-blue-500 mb-2"></div>
                                <div class="w-3/4 h-2 bg-gray-300 mb-1"></div>
                                <div class="w-full h-1 bg-gray-200 mb-1"></div>
                                <div class="w-full h-1 bg-gray-200 mb-1"></div>
                                <div class="mt-auto text-xs text-center">Professional</div>
                            </div>
                        </div>
                        <div class="template-option cursor-pointer" data-template="modern">
                            <div class="template-preview bg-gray-50 p-3 rounded-lg border-2 border-gray-300 hover:border-blue-500 transition duration-300 h-24 flex flex-col">
                                <div class="w-1/2 mx-auto h-3 bg-teal-500 mb-2 rounded-full"></div>
                                <div class="w-3/4 mx-auto h-2 bg-gray-300 mb-1"></div>
                                <div class="w-full h-1 bg-gray-200 mb-1"></div>
                                <div class="w-full h-1 bg-gray-200 mb-1"></div>
                                <div class="mt-auto text-xs text-center">Modern</div>
                            </div>
                        </div>
                        <div class="template-option cursor-pointer" data-template="classic">
                            <div class="template-preview bg-gray-50 p-3 rounded-lg border-2 border-gray-300 hover:border-blue-500 transition duration-300 h-24 flex flex-col">
                                <div class="w-full text-center h-4 bg-indigo-500 mb-2"></div>
                                <div class="w-3/4 h-2 bg-gray-300 mb-1"></div>
                                <div class="w-full h-1 bg-gray-200 mb-1"></div>
                                <div class="w-full h-1 bg-gray-200 mb-1"></div>
                                <div class="mt-auto text-xs text-center">Classic</div>
                            </div>
                        </div>
                        <div class="template-option cursor-pointer" data-template="minimal">
                            <div class="template-preview bg-gray-50 p-3 rounded-lg border-2 border-gray-300 hover:border-blue-500 transition duration-300 h-24 flex flex-col">
                                <div class="w-1/4 h-3 bg-gray-800 mb-2"></div>
                                <div class="w-3/4 h-2 bg-gray-300 mb-1"></div>
                                <div class="w-full h-1 bg-gray-200 mb-1"></div>
                                <div class="w-full h-1 bg-gray-200 mb-1"></div>
                                <div class="mt-auto text-xs text-center">Minimal</div>
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="templateStyle" value="professional">
                </div>

                <div class="grid grid-cols-3 gap-4 mb-4">
                    <select id="outputFormat" class="col-span-1 p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 transition duration-300 text-gray-700">
                        <option value="pdf">PDF</option>
                        <option value="docx">DOCX</option>
                    </select>
                    <button id="previewResumeBtn" class="col-span-1 bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition duration-300 flex items-center justify-center font-medium">
                        <i class="fas fa-eye mr-2"></i>Preview
                    </button>
                    <button id="generateResumeBtn" class="col-span-1 bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition duration-300 flex items-center justify-center font-medium">
                        <i class="fas fa-file-alt mr-2"></i>Download
                    </button>
                </div>

                <div id="resumePreview" class="hidden">
                    <h3 class="text-lg font-medium mb-3 text-gray-800">Content Preview</h3>
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 max-height-box">
                        <div id="previewContent" class="text-sm whitespace-pre-line text-gray-700"></div>
                    </div>
                </div>
                <div id="loadingTailoring" class="mt-4 text-center hidden">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-600">
                    </div>
                    <p class="mt-2 text-purple-600">Generating tailored resume...</p>
                </div>
            </div>

            <!-- ===== Build From Scratch Section ===== -->
            <!-- <div id="buildResumeSection" class="bg-white rounded-xl p-6 card mt-8">
            <h2 class="text-xl font-semibold mb-4 flex items-center text-gray-800">
                <i class="fas fa-pencil-alt mr-2 text-purple-600"></i> Build Your First Resume
            </h2>
            <p class="text-gray-600 mb-4 text-sm">
                Don’t have a resume yet? Answer these questions in your own words—grammar or typos won’t matter.
            </p>
            <ol class="list-decimal pl-5 space-y-3 text-gray-700 mb-4">
                <li>Your full name, email, phone, LinkedIn/GitHub URL</li>
                <li>A 2–3 sentence professional summary or objective</li>
                <li>Education: institution, degree, years</li>
                <li>Skills (comma-separated)</li>
                <li>Projects or internships: title + 1–2 lines each</li>
                <li>Achievements, certifications, or extracurriculars</li>
            </ol>
            <textarea id="buildResponses"
                class="w-full h-56 p-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none"
                placeholder="Type your answers here…"></textarea>
            <button id="buildResumeBtn" type="button"
                class="mt-4 bg-purple-600 text-white py-2 px-6 rounded-lg hover:bg-purple-700 transition">
                Create Resume
            </button>
            <div id="buildLoading" class="mt-4 text-center hidden">
                <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-600">
                </div>
                <p class="mt-2 text-purple-600">Building your one-page resume…</p>
            </div>
        </div> -->

            <!-- Build Your First Resume -->
            <div id="buildResumeSection" class="hidden bg-gradient-to-br from-white to-gray-50 border-l-4 border-yellow-500 rounded-2xl p-10 mt-16 shadow-xl font-[Lora]">

                <!-- Header -->
                <h2 class="text-3xl font-semibold mb-6 flex items-center text-gray-800" style="font-family: 'Playfair Display', serif;">
                    <i class="fas fa-pencil-alt mr-3 text-yellow-500 text-2xl"></i> Build Your First Resume
                </h2>

                <!-- Description -->
                <p class="text-gray-700 mb-6 leading-relaxed text-base max-w-2xl">
                    Don't have a resume yet? No worries. Just answer these questions in your own words—typos or imperfect
                    grammar are fine. We’ll polish everything for you! Since we already have the job description, your
                    generated resume will be attuned for it. <br><span class="text-red-600 font-semibold">Ensure to verify
                        all information before submitting.</span>
                </p>

                <!-- Detailed Questions List -->
                <ol class="list-decimal pl-5 space-y-3 text-gray-800 text-base mb-6 max-w-2xl">
                    <li><strong>Contact Info:</strong> Full name, email, phone, LinkedIn/GitHub/personal site URLs</li>
                    <li><strong>Summary/Objective:</strong> 2–3 sentences about your career goals or what you bring</li>
                    <li><strong>Education:</strong> School/University, degree, field, start–end years, (GPA if strong)</li>
                    <li><strong>Technical Skills:</strong> Languages, frameworks, tools—comma-separated, with proficiency
                        level if you like</li>
                    <li><strong>Projects & Internships:</strong>
                        <ul class="list-disc pl-5">
                            <li>Title, role, dates</li>
                            <li>2–3 bullet points: your contribution, tech used, measurable impact</li>
                        </ul>
                    </li>
                    <li><strong>Work/Volunteer/Leadership:</strong>
                        <ul class="list-disc pl-5">
                            <li>Organization/title/dates</li>
                            <li>2 bullet points: responsibilities & outcomes</li>
                        </ul>
                    </li>
                    <li><strong>Achievements & Awards:</strong> Competition name, year, result</li>
                    <li><strong>Certifications:</strong> Certification name, provider, date</li>
                    <li><strong>Languages & Interests:</strong> Spoken languages, extracurriculars, hobbies (optional)</li>
                </ol>

                <!-- Response Textarea -->
                <textarea id="buildResponses" class="w-full h-60 p-5 border border-purple-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-600 text-gray-800 resize-none shadow-sm" placeholder="Please answer each question above. You can number your responses or write as paragraphs—whatever’s easiest!"></textarea>

                <!-- Create Button -->
                <button id="buildResumeBtn" type="button" class="mt-6 bg-purple-600 text-white py-3 px-8 rounded-xl shadow-lg hover:bg-purple-700 transition font-semibold text-lg">
                    Create Resume
                </button>

                <!-- Loading Spinner -->
                <div id="buildLoading" class="mt-6 text-center hidden">
                    <div class="inline-block animate-spin rounded-full h-10 w-10 border-t-4 border-b-4 border-purple-600">
                    </div>
                    <p class="mt-3 text-purple-600 font-medium">Building your one-page resume…</p>
                </div>

                <div id="resumebuildersuccessmessage" class="mt-4 text-green-600 text-center font-medium hidden">
                    Resume generated and downloaded. Refresh the page, paste the job description, and upload this resume to
                    receive suggestions. Then update your resume accordingly.
                </div>

            </div>




            <!-- Resume Best Practices -->
            <section class="mt-16 bg-white p-10 rounded-2xl shadow-xl border-l-4 border-yellow-400 font-[Lora]">
                <h2 class="text-3xl font-semibold mb-10 flex items-center text-yellow-600 tracking-wide" style="font-family: 'Playfair Display', serif;">
                    <i class="fas fa-lightbulb mr-3 text-yellow-500 text-2xl"></i> Resume Best Practices
                </h2>

                <div class="grid md:grid-cols-3 gap-8">

                    <!-- Tip 1 -->
                    <div class="bg-gradient-to-br from-white to-gray-50 p-6 rounded-xl shadow-md border-l-[5px] border-yellow-400 hover:shadow-lg transition-all duration-300">
                        <h3 class="font-semibold text-lg mb-3 text-yellow-700" style="font-family: 'Playfair Display', serif;">
                            Tailor to the Job
                        </h3>
                        <p class="text-gray-700 leading-relaxed">
                            Customize your resume for each position by highlighting relevant skills and
                            experience that match the job requirements.
                        </p>
                    </div>

                    <!-- Tip 2 -->
                    <div class="bg-gradient-to-br from-white to-gray-50 p-6 rounded-xl shadow-md border-l-[5px] border-yellow-400 hover:shadow-lg transition-all duration-300">
                        <h3 class="font-semibold text-lg mb-3 text-yellow-700" style="font-family: 'Playfair Display', serif;">
                            Use Action Verbs
                        </h3>
                        <p class="text-gray-700 leading-relaxed">
                            Start achievement bullets with strong action verbs like “achieved,” “implemented,”
                            or “created” to showcase your contributions.
                        </p>
                    </div>

                    <!-- Tip 3 -->
                    <div class="bg-gradient-to-br from-white to-gray-50 p-6 rounded-xl shadow-md border-l-[5px] border-yellow-400 hover:shadow-lg transition-all duration-300">
                        <h3 class="font-semibold text-lg mb-3 text-yellow-700" style="font-family: 'Playfair Display', serif;">
                            Quantify Results
                        </h3>
                        <p class="text-gray-700 leading-relaxed">
                            Include numbers and percentages to quantify your achievements and
                            demonstrate your impact with concrete evidence.
                        </p>
                    </div>

                </div>
            </section>

            <section id="capabilities" class="mt-16 bg-white p-10 rounded-2xl shadow-xl border-l-4 border-yellow-400 font-[Lora]">
                <div class="max-w-6xl mx-auto px-6 flex flex-col items-center text-center">
                    <h2 class="text-4xl font-bold text-gray-800 mb-4" style="font-family:'Playfair Display', serif;">
                        <i class="fas fa-gear mr-3 text-yellow-500 text-4xl"></i> Our Capabilities
                    </h2>
                    <p class="text-gray-700 mb-12 max-w-2xl mx-auto">
                        From PDF parsing to AI-driven tuning, SURAT handles every step of your resume journey.
                    </p>

                    <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-4">
                        <!-- <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">
                        <i class="fas fa-file-upload text-3xl text-yellow-500 mb-4"></i>
                        <h3 class="text-xl font-semibold mb-2">Smart Upload & Parsing</h3>
                        <p class="text-gray-600 text-sm">
                            Extract and normalize text from PDF or DOCX files—headings, bullets and all.
                        </p>
                    </div> -->

                        <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">
                            <i class="fas fa-microscope text-3xl text-yellow-500 mb-4"></i>
                            <h3 class="text-xl font-semibold mb-2">AI Skill Extraction</h3>
                            <p class="text-gray-600 text-sm">
                                Automatically identify and categorize technical, soft, and domain skills from any job
                                description.
                            </p>
                        </div>

                        <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">
                            <i class="fas fa-chart-line text-3xl text-yellow-500 mb-4"></i>
                            <h3 class="text-xl font-semibold mb-2">Deep Resume Analysis</h3>
                            <p class="text-gray-600 text-sm">
                                Get matching scores, gap insights, and customized recommendations powered by Google Gemini
                                2.5 pro.
                            </p>
                        </div>

                        <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">
                            <i class="fas fa-chart-pie text-3xl text-yellow-500 mb-4"></i>
                            <h3 class="text-xl font-semibold mb-2">Visual Insights</h3>
                            <p class="text-gray-600 text-sm">
                                Interactive charts and gauges show you at a glance how you stack up on skills, ATS and more.
                            </p>
                        </div>

                        <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">
                            <i class="fas fa-edit text-3xl text-yellow-500 mb-4"></i>
                            <h3 class="text-xl font-semibold mb-2">One-Click Tailoring</h3>
                            <p class="text-gray-600 text-sm">
                                If user does not have the resume, or they want to rewrite their ATS optimized resume to
                                highlight relevant achievements and keywords.
                            </p>
                        </div>

                        <!-- <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">
                        <i class="fas fa-file-download text-3xl text-yellow-500 mb-4"></i>
                        <h3 class="text-xl font-semibold mb-2">Automatic DOCX Export</h3>
                        <p class="text-gray-600 text-sm">
                            Download their newly created resume as DOCX with classic ATS template.
                        </p>
                    </div> -->
                    </div>
                </div>
            </section>


            <!-- Tips Section -->
            <!-- <div class="mt-8 bg-white p-6 rounded-xl shadow-lg card">
            <h2 class="text-xl font-semibold mb-4 flex items-center text-gray-800">
                <i class="fas fa-lightbulb mr-2 text-yellow-500"></i>Resume Best Practices
            </h2>
            <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm border-l-4 border-blue-500 hover:shadow-md transition">
                    <h3 class="font-bold text-lg mb-2 text-blue-700">Tailor to the Job</h3>
                    <p class="text-gray-700">Customize your resume for each position by highlighting relevant skills and
                        experience that match the job requirements.</p>
                </div>
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm border-l-4 border-green-500 hover:shadow-md transition">
                    <h3 class="font-bold text-lg mb-2 text-green-700">Use Action Verbs</h3>
                    <p class="text-gray-700">Start achievement bullets with strong action verbs like "achieved,"
                        "implemented," or "created" to showcase your contributions.</p>
                </div>
                <div
                    class="bg-gray-50 p-5 rounded-lg shadow-sm border-l-4 border-purple-500 hover:shadow-md transition">
                    <h3 class="font-bold text-lg mb-2 text-purple-700">Quantify Results</h3>
                    <p class="text-gray-700">Include numbers and percentages to quantify your achievements and
                        demonstrate your impact with concrete evidence.</p>
                </div>
            </div>
        </div> -->
        </div>

        <footer class="bg-black text-white mt-24 pt-10 pb-6 border-t-2 border-yellow-500 shadow-inner">
            <div class="container mx-auto px-6 max-w-screen-xl text-center font-[Lora] space-y-2 text-gray-300" style="font-family: 'Verdana', serif;">

                <p class="text-sm">
                    © 2025 <span style="font-family: 'Playfair Display', serif;">SURAT</span>
                    · Shoolini University Resume Analyzer & Tuner
                </p>

                <p class="text-sm">
                    Made with ❤️ by <span class="font-semibold">Divya Mohan, Prince Singh, and Ajay Kumar</span> · Hosted on
                    <a href="https://dmj.one" class="text-yellow-300 hover:text-yellow-400 transition underline underline-offset-2">dmj.one</a>
                </p>
                <p class="text-sm">
                    All rights reserved. Unauthorized copying, modification, distribution, or reverse engineering of this
                    software is strictly prohibited.
                </p>

                <div class="flex justify-center space-x-4 mt-2">
                    <a href="https://github.com/divyamohan1993" class="text-gray-400 hover:text-yellow-400 transition" aria-label="GitHub">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                    <a href="mailto:hello@dmj.one" class="text-gray-400 hover:text-yellow-400 transition" aria-label="Email">
                        <i class="fas fa-envelope text-xl"></i>
                    </a>
                </div>

            </div>
        </footer>


        <div id="toastContainer"></div>

        <script>
            // Global variables to store data
            let extractedSkills = [];
            let skillsByCategory = {};
            let mySkillChart = null;
            let categoryCharts = {};

            // ─── Add this helper so nothing ever renders as “[object Object]” ────────
            function stringifyAny(val) {
                if (typeof val === 'string') return val;
                try {
                    return JSON.stringify(val, null, 2);
                } catch {
                    return String(val);
                }
            }

            /**
     * Recursively render any JS value into DOM:
     * - primitives → text nodes
     * - arrays → <ul><li>…</li></ul>
     * - objects → <dl><dt>key</dt><dd>value</dd></dl>
     */
            function renderAny(val, container) {
                if (val == null) {
                    return;
                }
                if (typeof val === 'string'
                    || typeof val === 'number'
                    || typeof val === 'boolean') {
                    container.textContent = val;
                }
                else if (Array.isArray(val)) {
                    const ul = document.createElement('ul');
                    val.forEach(item => {
                        const li = document.createElement('li');
                        renderAny(item, li);
                        ul.appendChild(li);
                    });
                    container.appendChild(ul);
                }
                else if (typeof val === 'object') {
                    const dl = document.createElement('dl');
                    Object.entries(val).forEach(([key, v]) => {
                        const dt = document.createElement('dt');
                        dt.innerHTML = `<strong>${key}</strong>`;
                        const dd = document.createElement('dd');
                        renderAny(v, dd);
                        dl.appendChild(dt);
                        dl.appendChild(dd);
                    });
                    container.appendChild(dl);
                }
                else {
                    container.textContent = String(val);
                }
            }


            // Initialize template selection
            document.querySelectorAll('.template-option').forEach(option => {
                option.addEventListener('click', function () {
                    // Remove active class from all options
                    document.querySelectorAll('.template-option').forEach(opt => {
                        opt.classList.remove('active');
                        opt.querySelector('.template-preview').classList.remove('border-blue-500');
                        opt.querySelector('.template-preview').classList.add('border-gray-300');
                    });

                    // Add active class to selected option
                    this.classList.add('active');
                    this.querySelector('.template-preview').classList.remove('border-gray-300');
                    this.querySelector('.template-preview').classList.add('border-blue-500');

                    // Update hidden input value
                    document.getElementById('templateStyle').value = this.dataset.template;
                });
            });

            // auto‐extract skills as you type in JD
            const jdInput = document.getElementById('jobDescription');
            let jdTimeout;
            jdInput.addEventListener('input', () => {
                clearTimeout(jdTimeout);
                jdTimeout = setTimeout(() => {
                    const jd = jdInput.value.trim();
                    if (!jd) return;

                    // show spinner, hide old table
                    document.getElementById('loadingSkills').classList.remove('hidden');
                    document.getElementById('skillsTable').classList.add('hidden');

                    fetch('/extract_skills', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ job_description: jd })
                    })
                        .then(r => r.json())
                        .then(data => {
                            extractedSkills = data.skills || [];
                            skillsByCategory = data.skills_by_category || {};
                            displayCategorizedSkills(skillsByCategory);
                            displaySkills(extractedSkills);
                        })
                        .catch(console.error)
                        .finally(() => {
                            // store them in your hidden textarea, show + auto-hide banner
                            showJdSuccess();
                            showSuccessToast('JD Processed. Now Please upload your resume.');
                            const resumeSection = document.getElementById('resumeSection');
                            resumeSection.classList.remove('disabled');

                            document.getElementById('lockedmessagependingjd').classList.add('hidden');;
                            // document.getElementById('lockedmessagependingjdinlocker').classList.remove('hidden');
                            document.getElementById('resumePrompt').classList.remove('hidden');

                            document.getElementById('loadingSkills').classList.add('hidden');

                            document.getElementById('skillsTable').classList.add('hidden');
                        });
                }, 500);
            });

            document.getElementById('buildResumeBtn').addEventListener('click', () => {
                const raw = document.getElementById('buildResponses').value.trim();
                if (!raw) {
                    showDangerToast('Please answer the questions above before proceeding.');
                    return;
                }

                // Show spinner
                document.getElementById('buildLoading').classList.remove('hidden');
                document.getElementById('resumebuildersuccessmessage').classList.add('hidden');
                document.getElementById('buildResumeBtn').disabled = true;

                fetch('/create_resume', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        responses: raw,
                        job_description: document.getElementById('jobDescription').value.trim()
                    })
                })
                    .then(res => {
                        if (!res.ok) throw new Error(res.statusText);
                        return res.blob();
                    })
                    .then(blob => {
                        // auto-download the DOCX
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = 'My_Resume.docx';
                        document.body.appendChild(a);
                        a.click();
                        a.remove();
                    })
                    .catch(err => {
                        console.error(err);
                        showDangerToast('Failed to build resume. Try again.');
                    })
                    .finally(() => {
                        document.getElementById('buildLoading').classList.add('hidden');
                        document.getElementById('resumebuildersuccessmessage').classList.remove('hidden');
                        document.getElementById('buildResumeBtn').disabled = false;
                        showSuccessToast("Resume generated and downloaded");
                    });
            });


            // Upload Resume
            document.getElementById('resumeUpload').addEventListener('change', function (event) {
                const file = event.target.files[0];
                if (!file) return;

                // Show loading
                document.getElementById('loadingResume').classList.remove('hidden');

                const formData = new FormData();
                formData.append('file', file);

                fetch('/upload_resume', {
                    method: 'POST',
                    body: formData,
                })
                    .then(response => response.json())
                    .then(data => {
                        if (data.error) {
                            alert(data.error);
                        } else {
                            document.getElementById('resumeText').value = data.resume_text;
                            const msg = document.getElementById("resumeSuccessMessage");
                            msg.classList.remove("hidden");
                            showSuccessToast('Resume will be now processed against JD.');
                            // setTimeout(() => msg.classList.add("hidden"), 3000);

                            // automatically analyze once both JD and Resume are loaded:
                            if (extractedSkills.length && document.getElementById('resumeText').value.trim()) {
                                document.getElementById('mainanalysiscommoncontainer').classList.remove('hidden');
                                triggerAnalysis();
                            }
                        }
                        document.getElementById('loadingResume').classList.add('hidden');
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Error uploading resume. Please try again.');
                        document.getElementById('loadingResume').classList.add('hidden');
                    });
            });
            // ——— Handle “Paste Text” resume submissions ———
            const resumeTextArea = document.getElementById('resumeText');
            let pasteTimeout;

            resumeTextArea.addEventListener('input', () => {
                clearTimeout(pasteTimeout);
                pasteTimeout = setTimeout(() => {
                    const text = resumeTextArea.value.trim();
                    // only trigger if we actually have JD-extracted skills and non-empty text
                    if (text && extractedSkills.length) {
                        // show the “resume received” message
                        document.getElementById('resumeSuccessMessage').classList.remove('hidden');
                        showSuccessToast('Resume received. Processing now…');

                        // un-hide the analysis container and kick off the analysis just like the PDF path
                        document.getElementById('mainanalysiscommoncontainer').classList.remove('hidden');
                        triggerAnalysis();
                        resumeTextArea.classList.add('disabled')
                    }
                }, 500);
            });

            // Analyze Resume
            function triggerAnalysis() {
                const resumeText = document.getElementById('resumeText').value.trim();

                if (!resumeText) {
                    alert('Please upload or paste your resume');
                    return;
                }

                const jobDescription = document.getElementById('jobDescription').value.trim();

                if (!jobDescription) {
                    alert('Please enter a job description');
                    return;
                }

                if (extractedSkills.length === 0) {
                    alert('Please extract skills from the job description first');
                    return;
                }

                // Show loading
                document.getElementById('loadingAnalysis').classList.remove('hidden');
                document.getElementById('feedbackHero').classList.add('hidden');
                document.getElementById('bothchartsinside').classList.add('hidden');
                // document.getElementById('chartContainer').classList.add('hidden');
                document.getElementById('matchedSkillsContainer').classList.add('hidden');
                document.getElementById('categoryAnalysisContainer').classList.add('hidden');
                document.getElementById('detailedAnalysisContainer').classList.add('hidden');
                document.getElementById('metricsDashboardContainer').classList.add('hidden');

                fetch('/analyze_resume', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        resume_text: resumeText,
                        job_description: jobDescription,
                        skills: extractedSkills,
                        skills_by_category: skillsByCategory
                    }),
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`Server returned ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log("🚀 analyze_resume returned:", data);
                        displayAnalysis(data);

                        // Hide loading, show results
                        document.getElementById('loadingAnalysis').classList.add('hidden');
                        document.getElementById('feedbackHero').classList.remove('hidden');
                        document.getElementById('bothchartsinside').classList.remove('hidden');
                        // document.getElementById('chartContainer').classList.remove('hidden');
                        document.getElementById('matchedSkillsContainer').classList.remove('hidden');

                        // Show new analysis sections if data exists
                        if (data.category_analysis) {
                            document.getElementById('categoryAnalysisContainer').classList.remove('hidden');
                            displayCategoryAnalysis(data.category_analysis);
                        }

                        if (data.detailed_analysis) {
                            document.getElementById('detailedAnalysisContainer').classList.remove('hidden');
                            displayDetailedAnalysis(data.detailed_analysis);
                        }

                        // if (data.ats_score) {
                        //     document.getElementById('detailedAnalysisContainer').classList.remove('hidden');
                        //     displayDetailedAnalysis(data.ats_score);
                        // }

                        // render the ATS score via its own chart helper, not displayDetailedAnalysis()
                        if (typeof data.detailed_analysis.ats_score === 'number') {
                            createAtsScoreChart(data.detailed_analysis.ats_score);
                        }

                        if (data.requirement_analysis) {
                            document.getElementById('requirementAnalysisContainer').classList.remove('hidden');
                            displayRequirementAnalysis(data.requirement_analysis);
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Error analyzing resume. Please try again.');
                        document.getElementById('loadingAnalysis').classList.add('hidden');
                    });
            }

            // Preview Resume
            document.getElementById('previewResumeBtn').addEventListener('click', function () {
                const resumeText = document.getElementById('resumeText').value.trim();
                const jobDescription = document.getElementById('jobDescription').value.trim();

                if (!resumeText) {
                    alert('Please upload or paste your resume');
                    return;
                }

                if (!jobDescription) {
                    alert('Please enter a job description');
                    return;
                }

                // Show loading
                document.getElementById('loadingTailoring').classList.remove('hidden');
                document.getElementById('resumePreview').classList.add('hidden');

                fetch('/preview_resume', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        resume_text: resumeText,
                        job_description: jobDescription,
                        skills: extractedSkills,
                        skills_by_category: skillsByCategory
                    }),
                })
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('previewContent').textContent = data.tailored_resume;

                        // Hide loading, show preview
                        document.getElementById('loadingTailoring').classList.add('hidden');
                        document.getElementById('resumePreview').classList.remove('hidden');
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Error generating preview. Please try again.');
                        document.getElementById('loadingTailoring').classList.add('hidden');
                    });
            });

            // Generate Resume
            document.getElementById('generateResumeBtn').addEventListener('click', function () {
                const resumeText = document.getElementById('resumeText').value.trim();
                const jobDescription = document.getElementById('jobDescription').value.trim();
                const outputFormat = document.getElementById('outputFormat').value;
                const templateStyle = document.getElementById('templateStyle').value;

                if (!resumeText) {
                    alert('Please upload or paste your resume');
                    return;
                }

                if (!jobDescription) {
                    alert('Please enter a job description');
                    return;
                }

                // Show loading
                document.getElementById('loadingTailoring').classList.remove('hidden');

                // Create form data and submit
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '/tailor_resume';

                // Add hidden fields
                const addField = (name, value) => {
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = name;
                    input.value = value;
                    form.appendChild(input);
                };

                addField('resume_text', resumeText);
                addField('job_description', jobDescription);
                addField('output_format', outputFormat);
                addField('template_style', templateStyle);
                addField('skills', JSON.stringify(extractedSkills));
                addField('skills_by_category', JSON.stringify(skillsByCategory));

                document.body.appendChild(form);
                form.submit();

                // Clean up form
                setTimeout(() => {
                    document.body.removeChild(form);
                    document.getElementById('loadingTailoring').classList.add('hidden');
                }, 2000);
            });

            // Helper Functions
            function displaySkills(skills) {
                const skillsList = document.getElementById('skillsList');
                skillsList.innerHTML = '';

                skills.forEach(skill => {
                    const li = document.createElement('li');
                    li.textContent = skill;
                    skillsList.appendChild(li);
                });
            }

            function displayCategorizedSkills(categorizedSkills) {
                const categorySkillsContainer = document.getElementById('categorySkills');
                categorySkillsContainer.innerHTML = '';

                for (const category in categorizedSkills) {
                    if (categorizedSkills[category].length === 0) continue;

                    const categoryDiv = document.createElement('div');
                    categoryDiv.className = 'mb-3';

                    const categoryTitle = document.createElement('h4');
                    categoryTitle.className = 'font-medium mb-1';
                    categoryTitle.textContent = category;

                    const skillsList = document.createElement('ul');
                    skillsList.className = 'list-disc pl-5 space-y-1 text-sm';

                    categorizedSkills[category].forEach(skill => {
                        const li = document.createElement('li');
                        li.textContent = skill;
                        skillsList.appendChild(li);
                    });

                    categoryDiv.appendChild(categoryTitle);
                    categoryDiv.appendChild(skillsList);
                    categorySkillsContainer.appendChild(categoryDiv);
                }
            }

            // map percentage → emotion text + corresponding tailwind classes

            function getEmotionMeta(match) {
                if (match < 10) return { text: "Critical Gaps", textClass: "text-red-600", barClass: "bg-red-600" };
                if (match < 20) return { text: "Major Gaps", textClass: "text-orange-600", barClass: "bg-orange-600" };
                if (match < 30) return { text: "Substantial Gaps", textClass: "text-amber-600", barClass: "bg-amber-600" };
                if (match < 40) return { text: "Moderate Gaps", textClass: "text-yellow-600", barClass: "bg-yellow-600" };
                if (match < 50) return { text: "Minor Gaps", textClass: "text-lime-600", barClass: "bg-lime-600" };
                if (match < 60) return { text: "Fair Match", textClass: "text-green-600", barClass: "bg-green-600" };
                if (match < 70) return { text: "Good Match", textClass: "text-emerald-600", barClass: "bg-emerald-600" };
                if (match < 80) return { text: "Strong Match", textClass: "text-success-600", barClass: "bg-teal-600" };
                if (match < 90) return { text: "Excellent Match", textClass: "text-sky-600", barClass: "bg-sky-600" };
                return { text: "Outstanding Fit", textClass: "text-blue-600", barClass: "bg-blue-600" };
            }

            function displayAnalysis(data) {

                const mp = Math.round(data.match_percentage);
                const meta = getEmotionMeta(mp);

                // ─── HERO FEEDBACK ────────────────────────────────────────────────
                // 1) Emotion headline
                const heroEmotion = document.getElementById('heroEmotion');
                heroEmotion.textContent = meta.text;
                heroEmotion.className = `text-4xl md:text-4xl font-bold my-10 ${meta.textClass}`;

                // 2) Sub-headline: overall assessment (1–2 sentences)
                const heroHeadline = document.getElementById('heroHeadline');
                heroHeadline.textContent = data.detailed_analysis.overall_assessment;


                // Now show the hero and hide the old emotion if you like:
                document.getElementById('feedbackHero').classList.remove('hidden');


                // Update skill lists
                const matchedList = document.getElementById('matchedSkillsList');
                const unmatchedList = document.getElementById('unmatchedSkillsList');

                matchedList.innerHTML = '';
                unmatchedList.innerHTML = '';

                data.matched_skills.forEach(skill => {
                    const li = document.createElement('li');
                    li.textContent = skill;
                    matchedList.appendChild(li);
                });

                data.unmatched_skills.forEach(skill => {
                    const li = document.createElement('li');
                    li.textContent = skill;
                    unmatchedList.appendChild(li);
                });

                // Create or update charts
                createSkillMatchChart(data.matched_skills.length, data.unmatched_skills.length);
                // createOverallMatchChart(Math.round(data.match_percentage));

                // after createSkillMatchChart(...)
                const detail = data.detailed_analysis || data;
                const raw = {
                    // confidence_score: detail.confidence_score,
                    education_alignment: detail.education_alignment,
                    certification_relevance: detail.certification_relevance,
                    continuous_learning: detail.continuous_learning,
                    learning_speed: detail.learning_speed,
                    skill_diversity: detail.skill_diversity,
                    quantification_strength: detail.quantification_strength,
                    customization_level: detail.customization_level,
                    clarity: detail.clarity,
                    innovation: detail.innovation,
                    achievement_focus: detail.achievement_focus,
                    project_complexity: detail.project_complexity,
                    leadership_emphasis: detail.leadership_emphasis,
                    teamwork_emphasis: detail.teamwork_emphasis,
                    problem_solving: detail.problem_solving,
                    adaptability: detail.adaptability,
                    resilience: detail.resilience,
                    // assertiveness_level: detail.assertiveness_level,
                    // emotional_intelligence: detail.emotional_intelligence,
                    // behavioral_score: detail.behavioral_score,
                };
                document.getElementById('analysisconfidencescore').innerText = detail.confidence_score;
                renderAllMetrics(raw);

            }

            function displayCategoryAnalysis(categoryAnalysis) {
                const categoryChartsContainer = document.getElementById('categoryCharts');
                categoryChartsContainer.innerHTML = '';

                // Clear existing charts
                Object.keys(categoryCharts).forEach(category => {
                    if (categoryCharts[category]) {
                        categoryCharts[category].destroy();
                        delete categoryCharts[category];
                    }
                });

                // Create charts for each category
                for (const category in categoryAnalysis) {
                    const analysis = categoryAnalysis[category];

                    // Skip categories with no skills
                    if (analysis.matched.length === 0 && analysis.unmatched.length === 0) {
                        continue;
                    }

                    // Create container
                    const categoryDiv = document.createElement('div');
                    categoryDiv.className = 'bg-white p-3 rounded-lg border mb-3';

                    // Add title with percentage
                    const titleDiv = document.createElement('div');
                    titleDiv.className = 'flex justify-between items-center mb-2';

                    const title = document.createElement('h4');
                    title.className = 'font-medium';
                    title.textContent = category;

                    const percentage = document.createElement('span');
                    percentage.className = 'text-sm font-medium';

                    // Set color based on match percentage
                    if (analysis.match_percentage < 40) {
                        percentage.classList.add('text-red-500');
                    } else if (analysis.match_percentage < 70) {
                        percentage.classList.add('text-yellow-500');
                    } else {
                        percentage.classList.add('text-green-500');
                    }

                    percentage.textContent = `${Math.round(analysis.match_percentage)}%`;

                    titleDiv.appendChild(title);
                    titleDiv.appendChild(percentage);

                    // Create canvas for chart
                    const canvas = document.createElement('canvas');
                    canvas.id = `chart-${category.replace(/\s+/g, '-').toLowerCase()}`;
                    canvas.className = 'mt-2';

                    categoryDiv.appendChild(titleDiv);
                    categoryDiv.appendChild(canvas);
                    categoryChartsContainer.appendChild(categoryDiv);

                    // Create chart
                    createCategoryChart(
                        canvas.id,
                        analysis.matched.length,
                        analysis.unmatched.length,
                        analysis.match_percentage
                    );
                }
            }

            function displayDetailedAnalysis(analysis) {
                // Overall Assessment
                // document.getElementById('overallAssessment').textContent = analysis.overall_assessment;
                const ov = document.getElementById('overallAssessment');
                ov.innerHTML = '';
                renderAny(analysis.overall_assessment, ov);

                // document.getElementById('atsFeedback').textContent = analysis.ats_score;
                // const ats = document.getElementById('atsFeedback');
                // ats.innerHTML = '';
                // renderAny(analysis.ats_score, ats);

                // Recommendations
                const recommendationsList = document.getElementById('recommendationsList');
                recommendationsList.innerHTML = '';

                aorig = analysis;

                analysis.recommendations.forEach(rec => {
                    const li = document.createElement('li');
                    // li.textContent = stringifyAny(rec);
                    renderAny(rec, li);
                    recommendationsList.appendChild(li);
                });

                // Quick Fixes
                const quickFixesList = document.getElementById('quickFixes');
                quickFixesList.innerHTML = '';

                analysis.quick_fixes.forEach(qF => {
                    const li = document.createElement('li');
                    // li.textContent = stringifyAny(rec);
                    renderAny(qF, li);
                    quickFixesList.appendChild(li);
                });

                // Priority Skills
                const prioritySkillsList = document.getElementById('prioritySkillsList');
                prioritySkillsList.innerHTML = '';

                analysis.priority_skills.forEach(skill => {
                    const li = document.createElement('li');
                    // li.textContent = stringifyAny(skill);
                    renderAny(skill, li);
                    prioritySkillsList.appendChild(li);
                });

                // Sections to Improve
                const sectionsToImproveList = document.getElementById('sectionsToImproveList');
                sectionsToImproveList.innerHTML = '';

                analysis.sections_to_improve.forEach(section => {
                    const li = document.createElement('li');
                    // li.textContent = stringifyAny(section);
                    renderAny(section, li);
                    sectionsToImproveList.appendChild(li);
                });

                createAtsScoreChart(aorig.ats_score);
            }

            function createSkillMatchChart(matched, unmatched) {
                const ctx = document.getElementById('skillChart').getContext('2d');

                // Destroy previous chart if it exists
                if (mySkillChart) {
                    mySkillChart.destroy();
                }

                mySkillChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Matched Skills', 'Missing Skills'],
                        datasets: [{
                            data: [matched, unmatched],
                            backgroundColor: [
                                'rgba(75, 192, 192, 0.8)',
                                'rgba(255, 99, 132, 0.8)'
                            ],
                            borderColor: [
                                'rgba(75, 192, 192, 1)',
                                'rgba(255, 99, 132, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'top'
                            },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        const label = context.label || '';
                                        const value = context.raw || 0;
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = Math.round((value / total) * 100);
                                        return `${label}: ${value} (${percentage}%)`;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            function displayRequirementAnalysis(list) {
                const container = document.getElementById('requirementList');
                container.innerHTML = '';
                list.forEach(entry => {
                    const card = document.createElement('div');
                    card.className = 'bg-white p-4 rounded-lg border';

                    // Requirement text + status
                    const header = document.createElement('div');
                    header.className = 'flex justify-between items-center mb-2';
                    header.innerHTML = `
                  <span class="font-semibold">${entry.requirement}</span>
                  <span class="${entry.covered ? 'text-green-600' : 'text-red-600'}">
                    ${entry.covered ? '✅ Covered' : '❌ Missing'}
                  </span>
                `;
                    card.appendChild(header);

                    // Snippet
                    const snippet = document.createElement('p');
                    snippet.className = 'italic mb-2 text-gray-700';
                    snippet.textContent = entry.matched_snippet || 'No matching snippet found.';
                    card.appendChild(snippet);

                    // Suggestions
                    const s = entry.suggestions;
                    if (s.highlighted_terms.length) {
                        const listTerms = termArray => termArray.join(', ') || '—';
                        const suggHtml = `
                      <p><strong>Highlight:</strong> ${listTerms(s.highlighted_terms)}</p>
                      <p><strong>Replace with:</strong> ${listTerms(s.suggested_replacements)}</p>
                      <p class="mt-2"><strong>Revised snippet:</strong> <mark>${s.revised_snippet}</mark></p>
                    `;
                        const div = document.createElement('div');
                        div.className = 'text-sm text-gray-800';
                        div.innerHTML = suggHtml;
                        card.appendChild(div);
                    }

                    container.appendChild(card);
                });
            }


            function createAtsScoreChart(score) {
                const ctx = document.getElementById('atsScoreChart').getContext('2d');
                // destroy old chart if present
                if (window.atsChart) window.atsChart.destroy();

                // pick a color by threshold
                let color;
                if (score < 40) color = 'rgba(255, 99, 132, 0.8)';  // red
                else if (score < 70) color = 'rgba(255, 205, 86, 0.8)';  // yellow
                else color = 'rgba(75, 192, 192, 0.8)'; // green

                window.atsChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        datasets: [{
                            data: [score, 100 - score],
                            backgroundColor: [color, '#e5e7eb'],
                            borderWidth: 0,
                        }]
                    },
                    options: {
                        cutout: '75%',
                        responsive: true,
                        plugins: {
                            legend: { display: false },
                            tooltip: { enabled: false }
                        }
                    }
                });

                // update the overlay text
                document.getElementById('atsScoreText').textContent = `${score}%`;
            }

            function createOverallMatchChart(score) {
                const ctx = document.getElementById('overallMatchChart').getContext('2d');
                // destroy old if present
                if (window.overallChart) window.overallChart.destroy();

                // choose color by threshold
                let color;
                if (score < 40) color = 'rgba(255, 99, 132, 0.8)';   // red
                else if (score < 70) color = 'rgba(255, 205, 86, 0.8)';  // yellow
                else color = 'rgba(75, 192, 192, 0.8)'; // green

                window.overallChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        datasets: [{
                            data: [score, 100 - score],
                            backgroundColor: [color, '#e5e7eb'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        cutout: '75%',
                        responsive: true,
                        plugins: {
                            legend: { display: false },
                            tooltip: { enabled: false }
                        }
                    }
                });

                // update the overlay text
                document.getElementById('overallMatchText').textContent = `${score}%`;
            }



            function createCategoryChart(canvasId, matched, unmatched, percentage) {
                const ctx = document.getElementById(canvasId).getContext('2d');

                // Calculate bar colors based on match percentage
                let barColor;
                if (percentage < 40) {
                    barColor = 'rgba(255, 99, 132, 0.8)'; // Red
                } else if (percentage < 70) {
                    barColor = 'rgba(255, 205, 86, 0.8)'; // Yellow
                } else {
                    barColor = 'rgba(75, 192, 192, 0.8)'; // Green
                }

                categoryCharts[canvasId] = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Matched', 'Missing'],
                        datasets: [{
                            label: 'Skills',
                            data: [matched, unmatched],
                            backgroundColor: [
                                barColor,
                                'rgba(201, 203, 207, 0.8)'
                            ],
                            borderColor: [
                                barColor.replace('0.8', '1'),
                                'rgba(201, 203, 207, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        const label = context.dataset.label || '';
                                        const value = context.raw || 0;
                                        return `${label}: ${value}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                ticks: {
                                    precision: 0
                                }
                            }
                        }
                    }
                });
            }

            /**
     * Renders one “gauge row” — either a doughnut (for 0–100 numbers)
     * or plain text (for strings).
     */
            // new:
            function renderGauge(name, v, wrap) {
                // 1) card wrapper
                const card = document.createElement('div');
                card.className = 'metric-card flex flex-col items-center';

                // 2) gauge + overlay container
                const gaugeWrapper = document.createElement('div');
                gaugeWrapper.className = 'relative w-16 h-16 mb-2';

                // 3) canvas
                const canvas = document.createElement('canvas');
                canvas.width = 64;
                canvas.height = 64;
                gaugeWrapper.appendChild(canvas);

                // 4) overlay text
                const overlay = document.createElement('div');
                overlay.className = 'absolute inset-0 flex items-center justify-center text-sm font-semibold text-gray-800';
                overlay.textContent = (typeof v === 'number') ? `${v}%` : String(v);
                gaugeWrapper.appendChild(overlay);

                // 5) draw doughnut
                if (typeof v === 'number' && !isNaN(v)) {
                    const ctx = canvas.getContext('2d');
                    const rest = 100 - v;
                    const color = v < 40
                        ? 'rgba(255,99,132,0.8)'
                        : v < 70
                            ? 'rgba(255,205,86,0.8)'
                            : 'rgba(75,192,192,0.8)';

                    new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            datasets: [{
                                data: [v, rest],
                                backgroundColor: [color, '#f1f5f9'],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            cutout: '70%',
                            responsive: false,
                            plugins: { legend: { display: false }, tooltip: { enabled: false } }
                        }
                    });
                }

                card.appendChild(gaugeWrapper);

                // 6) metric label
                const label = document.createElement('div');
                label.className = 'text-sm text-gray-600 text-center';
                label.textContent = name;
                card.appendChild(label);

                wrap.appendChild(card);
            }


            /**
             * Takes your raw‐metrics object { confidence_score:95, … }
             * and calls renderGauge() for each.
             */
            function renderAllMetrics(raw) {
                const container = document.getElementById('metricsDashboardContainer');
                container.classList.remove('hidden');
                const wrap = document.getElementById('metricsGauges');
                wrap.innerHTML = '';  // clear old

                Object.entries(raw).forEach(([key, val]) => {
                    if (val == null) return;
                    // Title-case label
                    const label = key
                        .replace(/_/g, ' ')
                        .replace(/\b\w/g, c => c.toUpperCase());
                    renderGauge(label, val, wrap);
                });
            }


        </script>


        <script>
            particlesJS('luxury-bg', {
                "particles": {
                    "number": { "value": 60 },
                    "color": { "value": "#d4af37" },
                    "shape": { "type": "circle" },
                    "opacity": { "value": 0.5 },
                    "size": { "value": 4 },
                    "line_linked": {
                        "enable": true,
                        "distance": 120,
                        "color": "#d4af37",
                        "opacity": 0.4,
                        "width": 1
                    },
                    "move": {
                        "enable": true,
                        "speed": 1.5,
                        "direction": "none",
                        "out_mode": "out"
                    }
                },
                "interactivity": {
                    "events": {
                        "onhover": { "enable": true, "mode": "repulse" }
                    }
                },
                "retina_detect": true
            });
        </script>

        <script>
            // Toggle between upload and paste
            const chooseUpload = document.getElementById('chooseUpload');
            const chooseText = document.getElementById('chooseText');
            const uploadBox = document.getElementById('uploadBox');
            const textBox = document.getElementById('textBox');

            chooseUpload.addEventListener('click', () => {
                uploadBox.classList.remove('hidden');
                textBox.classList.add('hidden');

                chooseUpload.classList.add('bg-yellow-600', 'text-white');
                chooseUpload.classList.remove('bg-yellow-100', 'text-yellow-800');

                chooseText.classList.remove('bg-yellow-600', 'text-white');
                chooseText.classList.add('bg-yellow-100', 'text-yellow-800');
            });

            chooseText.addEventListener('click', () => {
                textBox.classList.remove('hidden');
                uploadBox.classList.add('hidden');

                chooseText.classList.add('bg-yellow-600', 'text-white');
                chooseText.classList.remove('bg-yellow-100', 'text-yellow-800');

                chooseUpload.classList.remove('bg-yellow-600', 'text-white');
                chooseUpload.classList.add('bg-yellow-100', 'text-yellow-800');
            });


            // Example: Simulate storing extracted skills
            function showJdSuccess() {
                const msg = document.getElementById("jdSuccessMessage");
                msg.classList.remove("hidden");
                // setTimeout(() => msg.classList.add("hidden"), 3000);
            }

            // On page load: both boxes hidden; neutral button styles
            window.addEventListener('DOMContentLoaded', () => {
                uploadBox.classList.add('hidden');
                textBox.classList.add('hidden');

                // Optionally, you can pre-activate the Upload button:
                // chooseUpload.classList.add('bg-yellow-600','text-white');

                // document.getElementById('buildResumeSection').classList.add('hidden'); // keep builder hidden

                // Yes → show the normal upload/paste UI
                document.getElementById('hasResumeYes').addEventListener('click', () => {
                    document.getElementById('resumePrompt').classList.add('hidden');
                    document.getElementById('lockedmessagependingjdinlocker').classList.remove('hidden');
                });

                // No → hide the resume section entirely, show builder
                document.getElementById('hasResumeNo').addEventListener('click', () => {
                    document.getElementById('splitscreenjdresumecapturinglocation').classList.add('hidden');
                    document.getElementById('buildResumeSection').classList.remove('hidden');
                });
            });

            function showSuccessToast(message) {
                const toast = document.createElement('div');
                toast.className = 'toast-success';
                toast.innerText = message;

                const container = document.getElementById('toastContainer');
                container.innerHTML = ''; // clear any previous
                container.appendChild(toast);

                setTimeout(() => {
                    toast.remove();
                }, 4000);
            }
            function showDangerToast(message) {
                const toast = document.createElement('div');
                toast.className = 'toast-danger';
                toast.innerText = message;

                const container = document.getElementById('toastContainer');
                container.innerHTML = ''; // clear any previous
                container.appendChild(toast);

                setTimeout(() => {
                    toast.remove();
                }, 4000);
            }

        </script>


        <!-- <section class="mt-16 bg-white p-10 rounded-2xl shadow-xl border-l-4 border-yellow-400 font-[Lora]">
            <h2 class="text-3xl font-semibold mb-10 flex items-center text-yellow-600 tracking-wide"
                style="font-family: 'Playfair Display', serif;">
                <i class="fas fa-lightbulb mr-3 text-yellow-500 text-2xl"></i> Resume Best Practices
            </h2>

            <div class="grid md:grid-cols-3 gap-8">

                
                <div
                    class="bg-gradient-to-br from-white to-gray-50 p-6 rounded-xl shadow-md border-l-[5px] border-yellow-400 hover:shadow-lg transition-all duration-300">
                    <h3 class="font-semibold text-lg mb-3 text-yellow-700"
                        style="font-family: 'Playfair Display', serif;">
                        Tailor to the Job
                    </h3>
                    <p class="text-gray-700 leading-relaxed">
                        Customize your resume for each position by highlighting relevant skills and
                        experience that match the job requirements.
                    </p>
                </div>

                
                <div
                    class="bg-gradient-to-br from-white to-gray-50 p-6 rounded-xl shadow-md border-l-[5px] border-yellow-400 hover:shadow-lg transition-all duration-300">
                    <h3 class="font-semibold text-lg mb-3 text-yellow-700"
                        style="font-family: 'Playfair Display', serif;">
                        Use Action Verbs
                    </h3>
                    <p class="text-gray-700 leading-relaxed">
                        Start achievement bullets with strong action verbs like “achieved,” “implemented,”
                        or “created” to showcase your contributions.
                    </p>
                </div>

                
                <div
                    class="bg-gradient-to-br from-white to-gray-50 p-6 rounded-xl shadow-md border-l-[5px] border-yellow-400 hover:shadow-lg transition-all duration-300">
                    <h3 class="font-semibold text-lg mb-3 text-yellow-700"
                        style="font-family: 'Playfair Display', serif;">
                        Quantify Results
                    </h3>
                    <p class="text-gray-700 leading-relaxed">
                        Include numbers and percentages to quantify your achievements and
                        demonstrate your impact with concrete evidence.
                    </p>
                </div>

            </div>
        </section> -->

    </body>

</html>