<!doctype html>
<html lang="en" data-bs-theme="dark">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>dmj.one Trust Services — Verification</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
        <style>
            body {
                background: #0b0f14;
                color: #e7ebf2;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                height: 100vh;
                text-align: center
            }

            .logo {
                height: 64px;
                filter: drop-shadow(0 6px 18px rgba(0, 0, 0, .45))
            }

            h1 {
                font-size: 1.6rem;
                margin: .5rem 0
            }

            small {
                color: #94a3b8
            }

            .dropzone {
                border: 1px dashed #334155;
                border-radius: 1rem;
                padding: 2.5rem;
                cursor: pointer;
                transition: .2s
            }

            .dropzone:hover {
                border-color: #60a5fa;
                background: rgba(96, 165, 250, .05)
            }

            .spinner-border {
                color: #60a5fa
            }

            .hidden {
                display: none !important
            }

            footer {
                position: absolute;
                bottom: 1rem;
                color: #64748b;
                font-size: .9rem
            }
        </style>
    </head>

    <body>
        <img src="https://dmj.one/logo.png" class="logo" alt="">
        <h1 class="fw-semibold">dmj.one Trust Services</h1>
        <small>Document Verification System</small>

        <div class="mt-4 w-75 w-md-50">
            <input type="file" id="file" accept="application/pdf" hidden>
            <label for="file" id="dropzone" class="dropzone d-block">
                <i class="bi bi-upload fs-1 text-primary"></i>
                <div class="fw-semibold mt-2">Upload Document</div>
            </label>
            <div id="loading" class="hidden mt-4">
                <div class="spinner-border" role="status"></div>
            </div>
            <div id="result" class="hidden mt-4">
                <i id="resultIcon" class="bi fs-1"></i>
            </div>
            <a id="advanced" href="#" class="d-none mt-3 d-inline-block text-decoration-none text-info"><i class="bi bi-caret-right-fill"></i> View advanced info</a>
        </div>

        <footer>© dmj.one Trust Services</footer>

        <script>
            const f = document.getElementById('file'), d = document.getElementById('dropzone'), l = document.getElementById('loading'),
                r = document.getElementById('result'), i = document.getElementById('resultIcon'), adv = document.getElementById('advanced');
            d.addEventListener('dragover', e => { e.preventDefault(); d.classList.add('border-info') });
            d.addEventListener('dragleave', () => d.classList.remove('border-info'));
            d.addEventListener('drop', e => { e.preventDefault(); start(e.dataTransfer.files[0]) });
            f.addEventListener('change', e => start(e.target.files[0]));
            async function start(file) {
                if (!file) return; d.classList.add('hidden'); l.classList.remove('hidden');
                try {
                    const fd = new FormData(); fd.append('file', file);
                    const res = await fetch('/verify?json=1', { method: 'POST', body: fd });
                    const data = await res.json();
                    l.classList.add('hidden'); r.classList.remove('hidden'); adv.classList.remove('d-none');
                    const ok = data.verdict === 'valid';
                    i.className = 'bi fs-1 ' + (ok ? 'bi-check-circle text-success' : 'bi-x-circle text-danger');
                } catch { l.classList.add('hidden'); r.classList.remove('hidden'); i.className = 'bi fs-1 bi-exclamation-triangle text-danger' }
            }
        </script>
    </body>

</html>